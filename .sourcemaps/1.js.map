{"version":3,"sources":["../../src/pages/welcome/welcome.module.ts","../../src/pages/welcome/welcome.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACa;AACN;AAER;AAcxC,IAAa,iBAAiB;IAA9B;IAAiC,CAAC;IAAD,wBAAC;AAAD,CAAC;AAArB,iBAAiB;IAZ7B,uEAAQ,CAAC;QACR,YAAY,EAAE;YACZ,6DAAW;SACZ;QACD,OAAO,EAAE;YACP,sEAAe,CAAC,QAAQ,CAAC,6DAAW,CAAC;YACrC,4EAAe,CAAC,QAAQ,EAAE;SAC3B;QACD,OAAO,EAAE;YACP,6DAAW;SACZ;KACF,CAAC;GACW,iBAAiB,CAAI;AAAJ;;;;;;;;;;;;;;;;;;;;;;;AClBY;AACwC;AAEnB;AACG;AAMlE,IAAa,WAAW;IAOtB,qBACS,OAAsB,EACtB,cAA8B,EAC9B,WAA8B,EAC9B,SAA0B,EAC1B,eAAgC;QAJhC,YAAO,GAAP,OAAO,CAAe;QACtB,mBAAc,GAAd,cAAc,CAAgB;QAC9B,gBAAW,GAAX,WAAW,CAAmB;QAC9B,cAAS,GAAT,SAAS,CAAiB;QAC1B,oBAAe,GAAf,eAAe,CAAiB;IAAI,CAAC;IAE9C,sCAAgB,GAAhB;QAAA,iBAqBC;QApBC,IAAI,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACnC,OAAO,EAAE,YAAY;SACtB,CAAC,CAAC;QAEH,MAAM,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;YACpB,KAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC,SAAS,CAAC,UAAC,IAAI;gBACzC,MAAM,CAAC,OAAO,EAAE,CAAC;gBACjB,qBAAqB;gBACrB,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACrB,CAAC,EAAE,UAAC,GAAG;gBACL,KAAI,CAAC,WAAW,GAAG,GAAG,CAAC;gBACvB,MAAM,CAAC,OAAO,EAAE,CAAC;gBACjB,IAAI,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC;oBAChC,OAAO,EAAE,KAAI,CAAC,WAAW;oBACzB,QAAQ,EAAE,IAAI;oBACd,QAAQ,EAAE,QAAQ;iBACnB,CAAC,CAAC;gBACH,KAAK,CAAC,OAAO,EAAE,CAAC;YAClB,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IAED,+BAAS,GAAT,UAAU,EAAE;QACV,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;QAC/B,IAAI,GAAG,GAAG,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC;QAC1B,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;YACxB,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;YACxB,MAAM,CAAC;QACT,CAAC;QACD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC;IACxD,CAAC;IAED,6BAAO,GAAP;QACE,iBAAiB;QACjB,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACvD,OAAO,CAAC,GAAG,CAAC,UAAU,EAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC3C,iBAAiB;QACjB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC;IAChE,CAAC;IAED,4BAAM,GAAN,UAAO,KAAY;QACjB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC3B,2BAA2B;IAC7B,CAAC;IAED,kCAAY,GAAZ,UAAa,MAAY;QACvB,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;YACZ,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;QACrB,CAAC;QAED,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,UAAC,IAAI;YAC7B,GAAG,CAAC,CAAC,IAAI,GAAG,IAAI,MAAM,CAAC,CAAC,CAAC;gBACvB,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;gBACtB,EAAE,CAAC,CAAC,OAAO,KAAK,IAAI,QAAQ,IAAI,KAAK,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,WAAW,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;oBAC5F,MAAM,CAAC,IAAI,CAAC;gBACd,CAAC;gBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,IAAI,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oBAChC,MAAM,CAAC,IAAI,CAAC;gBACd,CAAC;YACH,CAAC;YACD,MAAM,CAAC,IAAI,CAAC;QACd,CAAC,CAAC,CAAC;IACL,CAAC;IAEH,kBAAC;AAAD,CAAC;AA/EY,WAAW;IAJvB,wEAAS,CAAC;QACT,QAAQ,EAAE,cAAc;OACG;KAC5B,CAAC;yFAS+B;QACN,wEAAc;QACjB,uEAAiB;QACnB,mFAAe;QACT,QAAe;AAmE1C;SA/EY,WAAW,e","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { WelcomePage } from './welcome';\n\n@NgModule({\n  declarations: [\n    WelcomePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(WelcomePage),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    WelcomePage\n  ]\n})\nexport class WelcomePageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/welcome/welcome.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, LoadingController, ToastController } from 'ionic-angular';\r\nimport { Store } from '../../models/store';\r\nimport { StoresProvider } from \"../../providers/stores/stores\";\r\nimport { StorageProvider } from \"../../providers/storage/storage\";\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-welcome',\r\n  templateUrl: 'welcome.html'\r\n})\r\nexport class WelcomePage {\r\n  storeInput: string;\r\n  selectedStore: Store;\r\n  hideCurrentStores: boolean;\r\n  stores: Store[];\r\n  currentStores: Store[];\r\n  errorString: string;\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public storesProvider: StoresProvider,\r\n    public loadingCtrl: LoadingController,\r\n    public toastCtrl: ToastController,\r\n    public storageProvider: StorageProvider) { }\r\n\r\n  ionViewWillEnter() {\r\n    let loader = this.loadingCtrl.create({\r\n      content: \"获取门店信息中...\"\r\n    });\r\n\r\n    loader.present().then(() => {\r\n      this.storesProvider.query().subscribe((resp) => {\r\n        loader.dismiss();\r\n        // console.log(resp);\r\n        this.stores = resp;\r\n      }, (err) => {\r\n        this.errorString = err;\r\n        loader.dismiss();\r\n        let toast = this.toastCtrl.create({\r\n          message: this.errorString,\r\n          duration: 3000,\r\n          position: 'bottom'\r\n        });\r\n        toast.present();\r\n      });\r\n    });\r\n  }\r\n\r\n  getStores(ev) {\r\n    this.hideCurrentStores = false;\r\n    let val = ev.target.value;\r\n    if (!val || !val.trim()) {\r\n      this.currentStores = [];\r\n      return;\r\n    }\r\n    this.currentStores = this.filterStores({ Name: val });\r\n  }\r\n\r\n  doLogin() {\r\n    // 保存门店数据到storage\r\n    this.storageProvider.saveStoreInfo(this.selectedStore);\r\n    console.log(\"要登录的门店是：\",this.selectedStore);\r\n    // 跳转页面到门店负责人登录界面\r\n    this.navCtrl.push('LoginPage', { store: this.selectedStore });\r\n  }\r\n\r\n  select(store: Store) {\r\n    this.hideCurrentStores = true;\r\n    this.selectedStore = store;\r\n    // console.log(store.Name);\r\n  }\r\n\r\n  filterStores(params?: any) {\r\n    if (!params) {\r\n      return this.stores;\r\n    }\r\n\r\n    return this.stores.filter((item) => {\r\n      for (let key in params) {\r\n        let field = item[key];\r\n        if (typeof field == 'string' && field.toLowerCase().indexOf(params[key].toLowerCase()) >= 0) {\r\n          return item;\r\n        } else if (field == params[key]) {\r\n          return item;\r\n        }\r\n      }\r\n      return null;\r\n    });\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/welcome/welcome.ts"],"sourceRoot":""}